---
title: Сигналы, процессы
sidebar_position: 2
description: Вопросы связанные с сигналами и процессами в Linux
---

## Для чего используется команда kill?

Команда kill позволяет завершить процесс по его идентификатору (PID). Чтобы узнать PID процесса, можно использовать команду ps или top. Команда kill посылает процессу сигнал, который может быть разным в зависимости от параметра. По умолчанию это сигнал TERM, который просит процесс завершиться. Если процесс не реагирует на сигнал TERM, можно использовать сигнал KILL, который принудительно убивает процесс. 

Например, чтобы убить процесс с PID 1234, можно выполнить команду:
```
$: kill 1234
# или 
$: kill -TERM 1234
```

Если процесс не завершается, можно выполнить команду:
```
$: kill -KILL 1234
# или 
$: kill -9 1234
```

Источники: 
- [Selectel](https://selectel.ru/blog/tutorials/kill-and-killall-commands-in-linux/)
- [Pingvinus](https://pingvinus.ru/note/ps-kill-killall)

## Чем отличаются сигналы, какие можно перехватить

Сигналы — это способ обмена информацией между процессами в Linux. Сигналы могут быть отправлены ядром, другими процессами или пользователем с помощью команды kill. Сигналы могут быть разными по своему назначению и эффекту. Например, сигнал SIGINT прерывает выполнение процесса, сигнал SIGKILL убивает процесс без возможности обработки, сигнал SIGUSR1 и SIGUSR2 предназначены для пользовательских целей.

Процессы могут перехватывать и обрабатывать некоторые сигналы, используя функцию signal или sigaction. Однако не все сигналы можно перехватить. Сигналы SIGKILL и SIGSTOP не могут быть перехвачены, игнорированы или заблокированы, так как они предназначены для надежного управления процессами. Также некоторые сигналы могут быть недоступны в зависимости от версии ядра или архитектуры системы.

## Что такое zombie и orphan?

zombie — это процесс, который завершил свою работу, но еще не освободил ресурсы, такие как PID, статус и память. Zombie ожидает, что его родительский процесс прочитает его статус с помощью системного вызова wait. Если родительский процесс не делает этого, zombie остается в таблице процессов и занимает место. Zombie не потребляет ЦП и не может быть убит сигналами. Чтобы избавиться от zombie, нужно убить его родителя или перезагрузить систему.

Orphan — это процесс, чей родительский процесс завершился, но не освободил его. Orphan продолжает работать, но теперь подчиняется процессу init, который становится его новым родителем. Init периодически вызывает wait, чтобы освободить сирот от их статусов. Orphans не являются проблемой для системы, так как они не засоряют таблицу процессов. Однако orphans могут потреблять ЦП, память и другие ресурсы, которые могут быть необходимы другим процессам. Чтобы избавиться от orphans, можно убить их сигналами или завершить их работу

## Когда процесс может не реагировать на SIGKILL?

- Процесс является процессом-зомби, который уже завершился, но не освободил свои ресурсы. Зомби не может принимать сигналы и ожидает, что его родительский процесс считает его статус с помощью системного вызова wait.
- Процесс находится в состоянии блокировки, когда он ожидает ввода-вывода или другого события, которое не наступило. Процесс не может завершиться, пока операционная система не вернет его в нормальное состояние.
- Процесс является процессом init, который не получает от операционной системы сигналов, которые он не хочет обрабатывать. Процесс init может игнорировать SIGKILL, так как он является особым процессом, который отвечает за запуск и завершение других процессов.

Источники: 
- [OpenNET](https://www.opennet.ru/docs/RUS/linux_parallel/node10.html)
